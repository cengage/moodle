function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(!a)return;if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,b)}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}define ("mod_lti/contentitem",["jquery","core/notification","core/str","core/templates","mod_lti/form-field","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){var h,i,j=[new e("name",e.TYPES.TEXT,!1,""),new e("introeditor",e.TYPES.EDITOR,!1,""),new e("toolurl",e.TYPES.TEXT,!0,""),new e("securetoolurl",e.TYPES.TEXT,!0,""),new e("instructorchoiceacceptgrades",e.TYPES.CHECKBOX,!0,!0),new e("instructorchoicesendname",e.TYPES.CHECKBOX,!0,!0),new e("instructorchoicesendemailaddr",e.TYPES.CHECKBOX,!0,!0),new e("instructorcustomparameters",e.TYPES.TEXT,!0,""),new e("icon",e.TYPES.TEXT,!0,""),new e("secureicon",e.TYPES.TEXT,!0,""),new e("launchcontainer",e.TYPES.SELECT,!0,0),new e("grade_modgrade_point",e.TYPES.TEXT,!1,""),new e("lineitemresourceid",e.TYPES.TEXT,!0,""),new e("lineitemtag",e.TYPES.TEXT,!0,"")],k=function(b){_toConsumableArray(document.querySelector("#region-main-box form.mform").children).filter(function(a){return"add_multiple_summary"!==a.id}).forEach(function hide(a){a.hidden=!0});document.querySelector("#id_submitbutton").hidden=!0;c.get_strings([{key:"contentitem_multiple_description",component:"mod_lti"},{key:"contentitem_multiple_graded",component:"mod_lti"}]).done(function(c){a("div#add_multiple_summary p").text(c[0]);b.forEach(function(b){var d=a("<li><strong></strong> <em></em></li>");d.find("strong").text(b.name);if(1===b.instructorchoiceacceptgrades){d.find("em").text(c[1].replace("$points",b.grade_modgrade_point||""))}a("div#add_multiple_summary ul").append(d)});document.querySelector("#fgroup_id_buttonar").hidden=!1})},l=function(a){var b={};["name","toolurl","securetoolurl","instructorcustomparameters","icon","secureicon"].forEach(function(c){b[c]=a[c]||""});if(1===a.instructorchoiceacceptgrades){b.instructorchoiceacceptgrades=1;b["grade[modgrade_type]"]="point";b["grade[modgrade_point]"]=a.grade_modgrade_point||100}else{b.instructorchoiceacceptgrades=0}return b};window.processContentItemReturnData=function(b){if(h){h.hide()}if(b.multiple){for(var c in j){j[c].setFieldValue("name"===j[c].name?"item":null)}var d=[];b.multiple.forEach(function(a){d.push(l(a))});a("#id_add_multiple").val(JSON.stringify(d));k(b.multiple)}else{for(c in j){var e=j[c],f=null;if("undefined"!=typeof b[e.name]){f=b[e.name]}e.setFieldValue(f)}e.setFieldValue(f)}if(i){i(b)}};return{init:function init(a,e,j){i=j;var k=d.render("mod_lti/contentitem",{url:a,postData:e});if(h){h.setBody(k);h.show();return}c.get_string("selectcontent","lti").then(function(a){return f.create({title:a,body:k,large:!0})}).then(function(a){h=a;a.getRoot().on(g.hidden,function(){a.setBody("");b.fetchNotifications()});a.show()}).catch(b.exception)}}});
//# sourceMappingURL=contentitem.min.js.map
